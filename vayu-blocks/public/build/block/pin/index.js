(()=>{"use strict";var e,t={2467:()=>{const e=window.wp.blocks,t=window.wp.i18n,o=window.wp.blockEditor,n=window.wp.element,r=window.wp.data;let i=0;const s=window.wp.components,l=window.ReactJSXRuntime,a=["vayu-blocks/advance-heading"],c=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"vayu-blocks/pin","version":"0.2.0","title":"Pin","parent":["vayu-blocks/image-hotspot","vayu-blocks/image"],"category":"vayu-blocks","description":"The image pin / pointer tool highlights specific areas in images for detailed analysis","supports":{"reusable":true,"html":false,"align":["wide","full"],"layout":false,"multiple":true},"textdomain":"vayu-blocks","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css","viewScriptModule":"file:./view.js","attributes":{"id":{"type":"string"},"uniqueID":{"type":"string"},"x":{"type":"number","default":50},"y":{"type":"number","default":50},"tooltipDisplay":{"type":"string","default":"onHover"},"animation":{"type":"string","default":"none"},"triangleArrowColor":{"type":"string"}}}'),u=window.React;var d={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},p=u.createContext&&u.createContext(d),v=["attr","size","title"];function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},b.apply(this,arguments)}function y(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function f(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?y(Object(o),!0).forEach((function(t){var n,r,i,s;n=e,r=t,i=o[t],(r="symbol"==typeof(s=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r))?s:s+"")in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):y(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function g(e){return e&&e.map(((e,t)=>u.createElement(e.tag,f({key:t},e.attr),g(e.child))))}function m(e){return t=>u.createElement(h,b({attr:f({},e.attr)},t),g(e.child))}function h(e){var t=t=>{var o,{attr:n,size:r,title:i}=e,s=function(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;o[n]=e[n]}return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)o=i[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}(e,v),l=r||t.size||"1em";return t.className&&(o=t.className),e.className&&(o=(o?o+" ":"")+e.className),u.createElement("svg",b({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,s,{className:o,style:f(f({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&u.createElement("title",null,i),e.children)};return void 0!==p?u.createElement(p.Consumer,null,(e=>t(e))):t(d)}function k(e){return m({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 56c110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200-110.532 0-200-89.451-200-200 0-110.532 89.451-200 200-200m0-48C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 168c-44.183 0-80 35.817-80 80s35.817 80 80 80 80-35.817 80-80-35.817-80-80-80z"},child:[]}]})(e)}(0,e.registerBlockType)(c.name,{...c,icon:(0,l.jsx)(k,{style:{color:"#6c1bc3"}}),edit:function({attributes:e,setAttributes:c,clientId:u,uniqueID:d}){const{id:p}=e,{addUniqueID:v}=(0,r.useDispatch)("vayu-blocks/data"),{isUniqueID:b,isUniqueBlock:y}=(0,r.useSelect)((e=>({isUniqueID:t=>e("vayu-blocks/data").isUniqueID(t),isUniqueBlock:(t,o)=>e("vayu-blocks/data").isUniqueBlock(t,o)})),[u]);(0,n.useEffect)((()=>{const t=function(e,t,o,n){let r="_"+t.substr(2,9);return e?o(e)||n(e,t)?e:r:(o(r)||(r=function(e){return i+=1,`${e}${i}`}(r)),r)}(d,u,b,y);t!==d?(e.uniqueID=t,c({uniqueID:t}),v(t,u)):v(t,u)}),[]),p||c({id:u});const{x:f=50,y:g=50,tooltipDisplay:m="onHover"}=e,[h,k]=(0,n.useState)(!1),w=(0,r.useSelect)((e=>{const{getBlockParents:t,getBlock:o}=e("core/block-editor"),n=t(u);if(n.length>0){const e=n.map((e=>o(e))).find((e=>"vayu-blocks/image"===e.name));return e?.clientId||null}return null}),[u]);(0,n.useEffect)((()=>{w&&c({parentBlock:w})}),[w]);const{insertBlock:x}=(0,r.useDispatch)("core/block-editor"),O=()=>{if(w){const e=wp.blocks.createBlock("vayu-blocks/pin",{x:50,y:50});x(e,void 0,w)}else console.error((0,t.__)("No parent Image block found to insert the pin.","vayu-blocks"))},_=()=>{wp.data.dispatch("core/block-editor").removeBlock(u)},j=(0,r.useSelect)((e=>{const{getBlock:t}=e("core/block-editor"),o=(t(u)?.innerBlocks||[]).find((e=>"vayu-blocks/advance-container"===e.name));return o?.attributes||{}}),[u]),B=j?.backgroundColor||"#444942";c({triangleArrowColor:B});const C=(0,n.useRef)();(0,n.useEffect)((()=>{if(C.current){const e=e=>{let t=e.querySelector(".triangle-arrow");t||(t=document.createElement("div"),t.className="triangle-arrow",e.querySelector("div.th-has-child").appendChild(t)),e.getBoundingClientRect(),t.style.cssText=`\n                    position: relative;\n                    width: 0;\n                    height: 0;\n                    border-left: 10px solid transparent;\n                    border-right: 10px solid transparent;\n                    border-top: 10px solid ${B};\n                `};C.current.querySelectorAll(".th-root-block-container").forEach((t=>e(t)));const t=new MutationObserver((t=>{t.forEach((t=>{"childList"===t.type&&t.addedNodes.length>0&&t.addedNodes.forEach((t=>{t.classList?.contains("th-root-block-container")&&e(t)}))}))}));return t.observe(C.current,{childList:!0,subtree:!0}),()=>{t.disconnect()}}console.warn("Block reference not found")}),[C,B]);const[P,S]=(0,n.useState)(!1);(0,n.useEffect)((()=>{const e=document.querySelector(".vayu_blcoks_icon_main_blocks_icon"),t=e=>{if(e.stopPropagation(),e.target.closest(".vayu_blocks_icon_block_main_icon_svg svg")){const t=e.target.closest(".vayu_blocks_icon_block_main_icon_svg svg").closest(".vayu-pin-spot-wrapper7");t&&t.classList.toggle("is-tooltip-visible")}};return e&&e.addEventListener("click",t),()=>{e&&e.removeEventListener("click",t)}}),[]);const E=(0,o.useBlockProps)({ref:C,id:e.id,className:"vayu-pin-block",style:{position:"absolute",top:`${g}%`,left:`${f}%`,transform:"translate(-50%, -50%)",cursor:h?"grabbing":"grab",zIndex:108},onMouseDown:e=>(()=>{k(!0);const e=e=>{const t=e.target.closest(".vayu_blocks_overlay_main_wrapper_image");if(!t)return;const o=t.getBoundingClientRect(),n=(e.clientX-o.left)/o.width*100,r=(e.clientY-o.top)/o.height*100;c({x:n,y:r})},t=()=>{k(!1),document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)};document.addEventListener("mousemove",e),document.addEventListener("mouseup",t)})()});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(o.BlockControls,{children:[(0,l.jsx)(s.ToolbarButton,{icon:"plus",label:(0,t.__)("Add Pin","vayu-blocks"),onClick:O}),(0,l.jsx)(s.ToolbarButton,{icon:"trash",label:(0,t.__)("Remove This Pin","vayu-blocks"),onClick:_,isDestructive:!0})]}),(0,l.jsx)(o.InspectorControls,{children:(0,l.jsxs)(s.PanelBody,{title:(0,t.__)("Pin Settings","vayu-blocks"),children:[(0,l.jsx)(s.Button,{className:"add-pin",isSecondary:!0,onClick:O,children:(0,t.__)("Add Pin","vayu-blocks")}),(0,l.jsx)(s.Button,{className:"delete-pin",isDestructive:!0,isSecondary:!0,onClick:_,children:(0,t.__)("Remove This Pin","vayu-blocks")}),(0,l.jsx)(s.SelectControl,{label:(0,t.__)("Tooltip Display","vayu-blocks"),value:m,options:[{label:(0,t.__)("On Hover","vayu-blocks"),value:"onHover"},{label:(0,t.__)("On Click","vayu-blocks"),value:"onClick"},{label:(0,t.__)("Always Visible","vayu-blocks"),value:"alwaysVisible"}],onChange:e=>c({tooltipDisplay:e})})]})}),(0,l.jsx)("div",{...E,children:(0,l.jsx)("div",{className:`vayu-pin-spot-wrapper7 tooltip-${m}`,style:{position:"relative"},onMouseEnter:()=>{"onHover"===m&&S(!0)},onMouseLeave:()=>{"onHover"===m&&S(!1)},children:(0,l.jsx)(o.InnerBlocks,{allowedBlocks:a,template:[["vayu-blocks/advance-container",{borderRadius:5,paddingType:"unlinked",paddingTop:5,paddingRight:18,paddingBottom:5,paddingLeft:18,paddingUnit:"px",backgroundColor:"#444942",borderRadius:5,position:"absolute",horizontalOrientation:"left",horizontalOrientationOffset:5,verticalOrientation:"bottom",verticalOrientationOffsetBottom:56,boxedcontentWidth:500,className:"vayu-pin-first-wrap"},[["vayu-blocks/advance-heading",{headingColor:"#FFF",content:(0,t.__)("Tooltip","vayu-blocks"),fontSize:16,tag:"p",paddingType:"unlinked",paddingTop:5,lineHeight:14}]]],["vayu-blocks/icon",{backgroundcolor:"#000",backgroundhoverColor:"#000",color:"#FFF",hoverColor:"#FFF",iconName:"wordpress-plusCircle",fontSize:18,iconRadius:{top:"100px",bottom:"100px",left:"100px",right:"100px"},iconhvrRadius:{top:"100px",bottom:"100px",left:"100px",right:"100px"},iconpadding:{top:"5px",bottom:"5px",left:"5px",right:"5px"},className:"vayu-pin-second-wrap"}]],renderAppender:()=>null})})})]})},save:({attributes:e})=>{const t=o.useBlockProps.save(),n=o.useInnerBlocksProps.save(t);return(0,l.jsx)("div",{...n})}})}},o={};function n(e){var r=o[e];if(void 0!==r)return r.exports;var i=o[e]={exports:{}};return t[e](i,i.exports,n),i.exports}n.m=t,e=[],n.O=(t,o,r,i)=>{if(!o){var s=1/0;for(u=0;u<e.length;u++){for(var[o,r,i]=e[u],l=!0,a=0;a<o.length;a++)(!1&i||s>=i)&&Object.keys(n.O).every((e=>n.O[e](o[a])))?o.splice(a--,1):(l=!1,i<s&&(s=i));if(l){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[o,r,i]},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={1275:0,4771:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var r,i,[s,l,a]=o,c=0;if(s.some((t=>0!==e[t]))){for(r in l)n.o(l,r)&&(n.m[r]=l[r]);if(a)var u=a(n)}for(t&&t(o);c<s.length;c++)i=s[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},o=globalThis.webpackChunkvayu_blocks=globalThis.webpackChunkvayu_blocks||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var r=n.O(void 0,[4771],(()=>n(2467)));r=n.O(r)})();