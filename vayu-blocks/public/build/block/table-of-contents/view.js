document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".vb-toc-wrapper").forEach((t=>{const e=t.querySelector(".vb-toc-toggle-button"),a=t.querySelector(".vb-toc-list"),s=t.querySelector(".vb-toc-separator");if(!e||!a)return;a.classList.contains("empty-toc");let i="true"===e.getAttribute("aria-expanded");const o=parseInt(a.dataset.collapseLimit||"0"),c=a.querySelectorAll(".vb-toc-item"),r=e.dataset.activeIcon,n=e.dataset.inactiveIcon,l=e.dataset.activetext,d=e.dataset.inactivetext,u=()=>{if(e.setAttribute("aria-expanded",i?"true":"false"),e.innerHTML=i?`${l||""}${r||""}`:`${d||""}${n||""}`,i?e.classList.add("vb-active"):e.classList.remove("vb-active"),0!==o||i?(a.style.display="grid",c.forEach(((t,e)=>{i||e<o?(t.style.display="list-item",t.setAttribute("aria-hidden","false"),t.classList.remove("is-collapsed")):(t.style.display="none",t.setAttribute("aria-hidden","true"),t.classList.add("is-collapsed"))}))):a.style.display="none",s){const t=i||o>0;s.style.display=t?"block":"none"}};u(),e.addEventListener("click",(()=>{i=!i,u()}))}))})),document.addEventListener("click",(function(t){const e=t.target.closest("a.vb-toc-link[data-scroll]");if(!e)return;t.preventDefault();const a=e.getAttribute("href");if(!a||!a.startsWith("#"))return;const s=document.querySelector(a);s&&window.scrollTo({top:s.getBoundingClientRect().top+window.pageYOffset-60,behavior:"smooth"})}));