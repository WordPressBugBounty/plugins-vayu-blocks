(()=>{var e={1687:()=>{wp.domReady((()=>{if(!wp?.blocks||!wp?.data||!ThBlockData?.autoRecovery)return;const e="vayu-blocks/";let t=0,r=[],o="";const c=({name:e,attributes:t,innerBlocks:r})=>{try{return wp.blocks.createBlock(e,t||{},r||[])}catch{return null}},n=e=>!1===e?.isValid,s=o=>o.map((o=>{try{if("core/block"===o.name){const s=o.attributes?.ref;if(!s)return o;const a=wp.data.select("core").getEditedEntityRecord("postType","wp_block",s);if(!a?.content?.raw)return o;const i=wp.blocks.parse(a.content.raw).filter((t=>t.name?.startsWith(e))),[l,d]=(o=>{const s=[...o];let a=!1;const i=o=>{for(const s of o){if(s?.name?.startsWith(e)&&(r.push(s.name),n(s))){const e=c(s);e&&(Object.assign(s,e),a=!0,t++)}Array.isArray(s.innerBlocks)&&s.innerBlocks.length>0&&i(s.innerBlocks)}};return i(s),[s,a]})(i);return d?{blocks:l,isReusable:!0,ref:s}:o}if(Array.isArray(o.innerBlocks)&&o.innerBlocks.length>0){const e=s(o.innerBlocks);e.some((e=>e.recovered))&&(o.innerBlocks=e,o.replacedClientId=o.clientId,o.recovered=!0)}if(!o.isValid&&o.name?.startsWith(e)){const e=c(o);if(e)return e.replacedClientId=o.clientId,e.recovered=!0,t++,e}return o}catch{return o}}));wp.data.subscribe((()=>{try{const e=wp.data.select("core/block-editor")||wp.data.select("core/editor"),c=wp.data.dispatch("core/block-editor")||wp.data.dispatch("core/editor"),n=e?.getBlocks?.()||[];if(!Array.isArray(n))return;const a=(e=>{const t=[],r=e=>{for(const o of e)t.push(o),o.innerBlocks?.length&&r(o.innerBlocks)};return r(e),t})(n).map((e=>e.clientId)).join(","),i=btoa(a);if(i===o)return;o=i,t=0,r=[];const l=s(n);for(const e of l){if(e?.isReusable&&e?.ref&&Array.isArray(e.blocks))try{wp.data.dispatch("core").editEntityRecord("postType","wp_block",e.ref,{content:wp.blocks.serialize(e.blocks)})}catch(t){console.warn(`[❌ Failed to Update Reusable] Ref: ${e.ref}`,t)}if(e?.recovered&&e?.replacedClientId)try{c.replaceBlock(e.replacedClientId,e),wp.data.dispatch("core/notices").removeNotice("block-invalid-"+e.replacedClientId)}catch(t){console.warn(`[❌ Failed to Replace Block] ${e.name}`,t)}}"function"==typeof c.updateEditorSettings&&c.updateEditorSettings({}),c.selectBlock(null),setTimeout((()=>{const t=e.getBlocks()?.[0];t?.clientId&&c.selectBlock(t.clientId)}),10)}catch(e){console.error("[❌ Recovery Error]",e)}}))}))}},t={};function r(o){var c=t[o];if(void 0!==c)return c.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(1687)})()})();